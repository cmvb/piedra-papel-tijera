<!-- Toolbar -->
<div class="toolbar" role="banner">
    <img width="40" alt="Angular Logo"
        src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg==" />
    <span>Bienvenido a Piedra, Papel o Tijera</span>
    <div class="spacer"></div>
</div>

<div class="content" role="main">
    <!-- Highlight Card -->
    <div class="card highlight-card card-small">
        <svg id="rocket" alt="Rocket Ship" xmlns="http://www.w3.org/2000/svg" width="101.678" height="101.678"
            viewBox="0 0 101.678 101.678">
            <g id="Group_83" data-name="Group 83" transform="translate(-141 -696)">
                <circle id="Ellipse_8" data-name="Ellipse 8" cx="50.839" cy="50.839" r="50.839"
                    transform="translate(141 696)" fill="#dd0031" />
                <g id="Group_47" data-name="Group 47" transform="translate(165.185 720.185)">
                    <path id="Path_33" data-name="Path 33"
                        d="M3.4,42.615a3.084,3.084,0,0,0,3.553,3.553,21.419,21.419,0,0,0,12.215-6.107L9.511,30.4A21.419,21.419,0,0,0,3.4,42.615Z"
                        transform="translate(0.371 3.363)" fill="#fff" />
                    <path id="Path_34" data-name="Path 34"
                        d="M53.3,3.221A3.09,3.09,0,0,0,50.081,0,48.227,48.227,0,0,0,18.322,13.437c-6-1.666-14.991-1.221-18.322,7.218A33.892,33.892,0,0,1,9.439,25.1l-.333.666a3.013,3.013,0,0,0,.555,3.553L23.985,43.641a2.9,2.9,0,0,0,3.553.555l.666-.333A33.892,33.892,0,0,1,32.647,53.3c8.55-3.664,8.884-12.326,7.218-18.322A48.227,48.227,0,0,0,53.3,3.221ZM34.424,9.772a6.439,6.439,0,1,1,9.106,9.106,6.368,6.368,0,0,1-9.106,0A6.467,6.467,0,0,1,34.424,9.772Z"
                        transform="translate(0 0.005)" fill="#fff" />
                </g>
            </g>
        </svg>

        <span>Escoge tu modalidad de juego para ver las opciones</span>

        <svg id="rocket-smoke" alt="Rocket Ship Smoke" xmlns="http://www.w3.org/2000/svg" width="516.119"
            height="1083.632" viewBox="0 0 516.119 1083.632">
            <path id="Path_40" data-name="Path 40"
                d="M644.6,141S143.02,215.537,147.049,870.207s342.774,201.755,342.774,201.755S404.659,847.213,388.815,762.2c-27.116-145.51-11.551-384.124,271.9-609.1C671.15,139.365,644.6,141,644.6,141Z"
                transform="translate(-147.025 -140.939)" fill="#f5f5f5" />
        </svg>

    </div>

    <p></p>

    <div class="text-center panel">
        <div class="card-container">
            <a class="card" (click)="seleccionarJuegoMultiplayer()">
                <i class="fa fa-users"></i>

                <span> Multiplayer</span>
            </a>

            <a class="card" (click)="seleccionarJuegoPC()">
                <i class="fa fa-android"></i>

                <span> VS Consola</span>
            </a>

            <a class="card"
                *ngIf="seleccion1 && seleccion2 && (juego === 'vs' || (juego === 'multiplayer' && jugador1.idJugador !== jugador2.idJugador))"
                (click)="iniciarJuego()">
                <i class="fa fa-play"></i>

                <span> Jugar</span>
            </a>
        </div>

        <div *ngIf="juego">
            <!-- Juego PC o Contrincante -->
            <div>
                <div *ngIf="juego === 'multiplayer'" class="dropdown">
                    <button class="btn btn-danger dropdown-toggle" type="button" id="ddJugador2"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        {{jugador2 ? 'Jugador: ' + jugador2.nombre : 'Escoge un
                        jugador'}}
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="ddJugador2">
                        <li *ngFor="let jug2 of listaJugadores">
                            <a class="dropdown-item" (click)="seleccionarJugador2(jug2)">Jugador: {{jug2.nombre}}</a>
                        </li>
                    </ul>
                </div>
                <div *ngIf="juego === 'vs'" class="dropdown">
                    <button class="btn btn-secondary" type="button">
                        El ordenador está listo para jugar
                    </button>
                </div>

                <div *ngIf="juego === 'multiplayer' && jugador2 && jugador2.idJugador > 0 && !seleccion2"
                    class="card-container">
                    <a class="circle-link" data-bs-toggle="tooltip" data-bs-placement="top" title="Piedra"
                        (click)="seleccionarJuego2(0)">
                        <img width="95%" height="95%" src="assets/images/piedra.png" />
                    </a>

                    <a class="circle-link" data-bs-toggle="tooltip" data-bs-placement="top" title="Papel"
                        (click)="seleccionarJuego2(1)">
                        <img width="95%" height="95%" src="assets/images/papel.png" />
                    </a>

                    <a class="circle-link" data-bs-toggle="tooltip" data-bs-placement="top" title="Tijera"
                        (click)="seleccionarJuego2(2)">
                        <img width="95%" height="95%" src="assets/images/tijera.png" />
                    </a>
                </div>
                <div *ngIf="juego === 'vs' || (juego === 'multiplayer' && jugador2 && jugador2.idJugador > 0 && seleccion2)"
                    class="card-container">
                    <a (click)="seleccion2 = undefined" class="circle-link" data-bs-toggle="tooltip"
                        data-bs-placement="top" title="Jugada Seleccionada">
                        <img width="95%" height="95%" src="assets/images/seleccion.png" />
                    </a>
                </div>
            </div>

            <!-- Historial -->
            <div class="terminal">
                <pre *ngFor="let msg of historialMensajes">{{msg}}</pre>
                <pre
                    *ngIf="jugador1 && jugador2 && (jugador1.idJugador === jugador2.idJugador)">¡No puedes jugar contra ti mismo!</pre>
            </div>

            <!-- Juego Jugador Principal -->
            <div>
                <div *ngIf="jugador1 && jugador1.idJugador > 0 && !seleccion1" class="card-container">
                    <a class="circle-link" data-bs-toggle="tooltip" data-bs-placement="top" title="Piedra"
                        (click)="seleccionarJuego1(0)">
                        <img width="95%" height="95%" src="assets/images/piedra.png" />
                    </a>

                    <a class="circle-link" data-bs-toggle="tooltip" data-bs-placement="top" title="Papel"
                        (click)="seleccionarJuego1(1)">
                        <img width="95%" height="95%" src="assets/images/papel.png" />
                    </a>

                    <a class="circle-link" data-bs-toggle="tooltip" data-bs-placement="top" title="Tijera"
                        (click)="seleccionarJuego1(2)">
                        <img width="95%" height="95%" src="assets/images/tijera.png" />
                    </a>
                </div>
                <div *ngIf="jugador1 && jugador1.idJugador > 0 && seleccion1" class="card-container">
                    <a (click)="seleccion1 = undefined" class="circle-link" data-bs-toggle="tooltip"
                        data-bs-placement="top" title="Jugada Seleccionada">
                        <img width="95%" height="95%" src="assets/images/seleccion.png" />
                    </a>
                </div>

                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="ddJugador1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        {{jugador1 ? 'Jugador: ' + jugador1.nombre : 'Escoge un
                        jugador'}}
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="ddJugador1">
                        <li *ngFor="let jug1 of listaJugadores">
                            <a class="dropdown-item" (click)="seleccionarJugador1(jug1)">Jugador: {{jug1.nombre}}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="panel">
            <h3>¡Crea jugadores, revisa el historial de puntajes y diviértete!</h3>

            <!-- Opciones -->
            <div class="card-container row justify-content-center">
                <div class="col-lg-3">
                    <div class="card card-small" (click)="inicializarJugador()" data-bs-toggle="modal"
                        data-bs-target="#nuevoJugadorModal">
                        <i class="fa fa-user-plus"></i>

                        <span>Nuevo Jugador</span>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="nuevoJugadorModal" tabindex="-1"
                        aria-labelledby="nuevoJugadorModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="nuevoJugadorModalLabel">Nuevo Jugador</h5>
                                    <button id="cerrarNuevoJugadorModal" type="button" class="btn-close"
                                        data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <input type="text" size="50" class="form-control" [(ngModel)]="jugadorCrear.nombre"
                                        placeholder="Nombre">

                                    <hr />

                                    <h3>Jugadores Disponibles</h3>
                                    <table *ngIf="listaJugadores.length > 0; else sinResultados" class="table">
                                        <thead>
                                            <tr>
                                                <th scope="col">Id</th>
                                                <th scope="col">Nombre</th>
                                                <th scope="col"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let jug of listaJugadores">
                                                <td>{{jug.idJugador}}</td>
                                                <td>{{jug.nombre}}</td>
                                                <td><i (click)="eliminarJugador(jug.idJugador)"
                                                        class="fa fa-times hover-danger cursor-pointer"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <ng-template #sinResultados>No hay jugadores para mostrar</ng-template>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" [disabled]="!jugadorCrear.nombre" class="btn btn-primary"
                                        (click)="crearJugador()">Crear
                                        Jugador</button>
                                </div>
                                <div id="alertCrearJugador"
                                    class="toast align-items-center text-white bg-danger border-0" role="alert"
                                    aria-live="assertive" aria-atomic="true">
                                    <div class="d-flex">
                                        <div class="toast-body">
                                            <i class="fa fa-warning"></i> {{mensajeValidacion}}
                                        </div>
                                        <button type="button" class="btn-close btn-close-white me-2 m-auto"
                                            data-bs-dismiss="toast" aria-label="Close"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="card card-small" data-bs-toggle="modal" data-bs-target="#puntajesModal">
                        <i class="fa fa-table"></i>

                        <span>Puntajes</span>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="puntajesModal" tabindex="-1" aria-labelledby="puntajesModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="puntajesModalLabel">Tabla de Puntajes</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <h3>Puntajes</h3>
                                    <table *ngIf="listaJugadores.length > 0; else sinResultados" class="table">
                                        <thead>
                                            <tr>
                                                <th scope="col">Id</th>
                                                <th scope="col">Nombre</th>
                                                <th scope="col">G</th>
                                                <th scope="col">E</th>
                                                <th scope="col">P</th>
                                                <th scope="col">Puntaje</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let jug of listaJugadores">
                                                <td>{{jug.idJugador}}</td>
                                                <td>{{jug.nombre}}</td>
                                                <td>{{jug.juegosGanados}}</td>
                                                <td>{{jug.juegosEmpatados}}</td>
                                                <td>{{jug.juegosPerdidos}}</td>
                                                <td>{{jug.puntaje}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <ng-template #sinResultados>No hay jugadores para mostrar</ng-template>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div id="mostrarReglas" class="card card-small" tabindex="0" data-bs-toggle="collapse"
                        href="#reglasJuego">
                        <i class="fa fa-info-circle"></i>

                        <span>Reglas de Juego</span>
                    </div>
                </div>
            </div>

            <!-- Reglas -->
            <div class="collapse" id="reglasJuego">
                <div class="card card-body row">
                    <div class="col-lg-12 text-justify">
                        <p><span style="text-decoration: underline;"><span>Instrucciones</span></span><b>: </b></p>
                        <p>Los jugadores cuentan juntos «1, 2, 3…, ¡piedra, papel o tijera!»</p>
                        <p>Justo al acabar muestran todos al mismo tiempo una de sus manos, de modo que pueda
                            verse el elemento que cada uno ha elegido:</p>
                        <ul>
                            <li>Piedra: un puño cerrado.</li>
                            <li>Papel: todos los dedos extendidos, con la palma de la mano de lado, mirando
                                hacia abajo o hacia arriba</li>
                            <li>Tijera: dedos índice y corazón extendidos y separados formando una «V».</li>
                        </ul>
                        <p>El objetivo es vencer al oponente seleccionando el arma que gana, según las siguientes
                            reglas:</p>
                        <ul>
                            <li>La piedra aplasta la tijera. (Gana la piedra.)</li>
                            <li>La tijera corta el papel. (Gana la tijera.)</li>
                            <li>El papel envuelve la piedra. (Gana el papel.)</li>
                        </ul>
                        <p>Al finalizar cada partida el resultado será guardado en un historial de puntajes. Estos
                            puntajes están establecidos de la siguiente manera:</p>
                        <ul>
                            <li>Partida ganada = 3 puntos.</li>
                            <li>Partida empatada = 1 punto.</li>
                            <li>Partida perdida = 0 puntos.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>